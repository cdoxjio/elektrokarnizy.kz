
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The MS-700 certification</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
</head>
<body class="mint-bg min-h-screen flex flex-col items-center">
  <div id="app" class="w-full flex flex-col items-center justify-center min-h-screen"></div>
  <div id="footerInfo"></div>
  <script>
    const QUESTIONS = [];
    let QUESTIONS_LOADED = false;
    let LOAD_ERROR = false;
    let groups = [];

    fetch('ms700_questions.json')
      .then(r => r.json())
      .then(qs => {
        QUESTIONS.push(...qs.map(q => {
          const correctAnswer = q.answers[0];
          const shuffledAnswers = shuffle([...q.answers]);
          const correctIndex = shuffledAnswers.indexOf(correctAnswer);
          return {
            ...q,
            answers: shuffledAnswers,
            correct: correctIndex
          };
        }));
        QUESTIONS_LOADED = true;
        start();
      })
      .catch(() => {
        LOAD_ERROR = true;
        render();
      });

    function shuffle(arr) {
      let a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function chunkArray(array, size) {
      const result = [];
      for (let i = 0; i < array.length; i += size) {
        result.push(array.slice(i, i + size));
      }
      return result;
    }

    function start() {
      groups = chunkArray(QUESTIONS, 20);
      render();
    }

    function render() {
      if (LOAD_ERROR) {
        document.getElementById('app').innerHTML = 'Error loading questions.';
        return;
      }
      if (!QUESTIONS_LOADED) {
        document.getElementById('app').innerHTML = 'Loading...';
        return;
      }

      let nav = '<nav class="groups-link-bar">';
      groups.forEach((group, idx) => {
        nav += `<button class="group-link" onclick="showGroup(${idx})">Group ${idx + 1}</button>`;
      });
      nav += '</nav>';

      document.getElementById('app').innerHTML = nav + '<div id="question-container"></div>';
      showGroup(0);
    }

    function showGroup(groupIdx) {
      const group = groups[groupIdx];
      let questionHtml = '';
      group.forEach((q, idx) => {
        questionHtml += `<div class="question-area p-4 bg-white rounded shadow my-2">`;
        questionHtml += `<p class="font-semibold">${idx + 1}. ${q.question}</p><ul>`;
        q.answers.forEach((ans, ansIdx) => {
          const optionLetter = String.fromCharCode(65 + ansIdx);
          questionHtml += `<li>${optionLetter}. ${ans}</li>`;
        });
        questionHtml += `</ul></div>`;
      });
      document.getElementById('question-container').innerHTML = questionHtml;
    }

  </script>
</body>
</html>
